package types

import "time"

// User represents a user in the system
type User struct {
	ID        int       `json:"id" db:"id"`
	Name      string    `json:"name" db:"name" validate:"required"`
	Email     string    `json:"email" db:"email" validate:"required,email"`
	Age       int       `json:"age" db:"age" validate:"min=0,max=150"`
	CreatedAt time.Time `json:"created_at" db:"created_at"`
	UpdatedAt time.Time `json:"updated_at" db:"updated_at"`
}

// Post represents a blog post or article
type Post struct {
	ID        int       `json:"id" db:"id"`
	Title     string    `json:"title" db:"title" validate:"required,min=1,max=200"`
	Content   string    `json:"content" db:"content" validate:"required,min=10"`
	UserID    int       `json:"user_id" db:"user_id" validate:"required"`
	User      *User     `json:"user,omitempty" db:"-"`
	Published bool      `json:"published" db:"published"`
	CreatedAt time.Time `json:"created_at" db:"created_at"`
	UpdatedAt time.Time `json:"updated_at" db:"updated_at"`
}

// Comment represents a comment on a post
type Comment struct {
	ID        int       `json:"id" db:"id"`
	Content   string    `json:"content" db:"content" validate:"required,min=1,max=500"`
	PostID    int       `json:"post_id" db:"post_id" validate:"required"`
	UserID    int       `json:"user_id" db:"user_id" validate:"required"`
	Post      *Post     `json:"post,omitempty" db:"-"`
	User      *User     `json:"user,omitempty" db:"-"`
	CreatedAt time.Time `json:"created_at" db:"created_at"`
	UpdatedAt time.Time `json:"updated_at" db:"updated_at"`
}

// Category represents a content category
type Category struct {
	ID          int    `json:"id" db:"id"`
	Name        string `json:"name" db:"name" validate:"required,min=1,max=100"`
	Description string `json:"description" db:"description"`
	Color       string `json:"color" db:"color" validate:"hexcolor"`
}

// Tag represents a content tag
type Tag struct {
	ID   int    `json:"id" db:"id"`
	Name string `json:"name" db:"name" validate:"required,min=1,max=50"`
	Slug string `json:"slug" db:"slug" validate:"required"`
}

// PostCategory represents the many-to-many relationship between posts and categories
type PostCategory struct {
	PostID     int `json:"post_id" db:"post_id"`
	CategoryID int `json:"category_id" db:"category_id"`
}

// PostTag represents the many-to-many relationship between posts and tags
type PostTag struct {
	PostID int `json:"post_id" db:"post_id"`
	TagID  int `json:"tag_id" db:"tag_id"`
}

// UserProfile extends user information
type UserProfile struct {
	UserID    int     `json:"user_id" db:"user_id"`
	Bio       *string `json:"bio,omitempty" db:"bio"`
	Avatar    *string `json:"avatar,omitempty" db:"avatar"`
	Website   *string `json:"website,omitempty" db:"website" validate:"omitempty,url"`
	Location  *string `json:"location,omitempty" db:"location"`
	BirthDate *string `json:"birth_date,omitempty" db:"birth_date"`
}

// APIResponse is a generic response wrapper
type APIResponse[T any] struct {
	Data    T      `json:"data,omitempty"`
	Error   string `json:"error,omitempty"`
	Message string `json:"message,omitempty"`
}

// PaginatedResponse wraps paginated data
type PaginatedResponse[T any] struct {
	Data       []T `json:"data"`
	Page       int `json:"page"`
	PerPage    int `json:"per_page"`
	Total      int `json:"total"`
	TotalPages int `json:"total_pages"`
}

// Status represents various status types
type Status string

const (
	StatusActive   Status = "active"
	StatusInactive Status = "inactive"
	StatusPending  Status = "pending"
	StatusArchived Status = "archived"
)

// Role represents user roles
type Role string

const (
	RoleAdmin     Role = "admin"
	RoleModerator Role = "moderator"
	RoleUser      Role = "user"
	RoleGuest     Role = "guest"
)

// Priority levels
type Priority string

const (
	PriorityLow    Priority = "low"
	PriorityMedium Priority = "medium"
	PriorityHigh   Priority = "high"
	PriorityUrgent Priority = "urgent"
) 